<ion-header class="ion-no-border">
  <ion-toolbar style="--background: #003366; --color: white; padding-top: 8px;">
    <ion-buttons slot="start">
      <div style="padding-left: 12px; display: flex; align-items: center; gap: 10px;">
        <div style="width: 36px; height: 36px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">
            <span style="font-size: 20px;">üçΩÔ∏è</span>
        </div>
        <div>
          <div style="font-weight: bold; font-size: 18px; letter-spacing: 1px; line-height: 1;">menyu</div>
          <div style="font-size: 10px; opacity: 0.8; font-weight: normal;">Pak Lek Enterprise</div>
        </div>
      </div>
    </ion-buttons>

    <ion-buttons slot="end">
      <ion-button (click)="onLogout()" style="--color: white;">
        <ion-icon name="log-out-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>

  <div style="background: #003366; color: white; padding: 5px 16px 15px 16px;">
    <p style="margin: 0; font-size: 14px; opacity: 0.9;">
      Welcome, <strong style="color: #FFD700;">{{ dataService.currentUser?.name || 'Guest' }}</strong>!
    </p>
  </div>

  <ion-toolbar style="--background: white; border-bottom: 1px solid #f0f0f0;">
    <ion-segment [scrollable]="true" value="All" (ionChange)="filterByCategory($event)" mode="md">
      <ion-segment-button *ngFor="let cat of categories" [value]="cat">
        <ion-label style="font-size: 12px; font-weight: bold;">{{ cat }}</ion-label>
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>

<ion-content style="--background: #f8f9fa;">
  <ion-row style="padding: 15px 10px;">
    <ion-col size="6">
      <div routerLink="/cart" style="background: #003366; color: white; border-radius: 16px; padding: 20px; text-align: center; box-shadow: 0 4px 15px rgba(0,51,102,0.2);">
        <ion-icon name="cart-outline" style="font-size: 24px;"></ion-icon>
        <div style="font-weight: bold; margin-top: 5px;">Cart ({{ dataService.cart?.length || 0 }})</div>
      </div>
    </ion-col>
    <ion-col size="6">
      <div routerLink="/orders" style="background: white; color: #003366; border: 2px solid #003366; border-radius: 16px; padding: 20px; text-align: center;">
        <ion-icon name="time-outline" style="font-size: 24px;"></ion-icon>
        <div style="font-weight: bold; margin-top: 5px;">Orders</div>
      </div>
    </ion-col>
  </ion-row>

  <div style="padding: 0 16px 20px 16px;">
    <h3 style="font-weight: 800; color: #333; margin-bottom: 16px;">Menu Items</h3>
    
    <ion-card *ngFor="let item of filteredMenu" style="margin: 0 0 16px 0; border-radius: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); border: 1px solid #eee;">
      <ion-item lines="none" style="--padding-start: 12px; padding: 12px 0;">
        <ion-thumbnail slot="start" style="width: 90px; height: 90px; --border-radius: 15px;">
          <img [src]="item.image" (error)="$any($event.target).src = 'assets/icon/favicon.png'" />
        </ion-thumbnail>
        <ion-label>
          <h2 style="font-weight: 800; font-size: 18px; color: #1a1a1a;">{{ item.name }}</h2>
          <p style="color: #666; font-size: 12px; margin: 4px 0;">{{ item.category }}</p>
          <h3 style="color: #003366; font-weight: 800; font-size: 18px; margin-top: 8px;">RM{{ item.price | number:'1.2-2' }}</h3>
        </ion-label>
        
        <ion-button slot="end" fill="solid" (click)="openAddon(item)"
          style="--background: #003366; --border-radius: 10px; font-weight: bold; height: 38px; font-size: 11px;">
          + ADD
        </ion-button>
      </ion-item>
    </ion-card>
  </div>
</ion-content>